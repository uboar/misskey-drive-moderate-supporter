var lt=Object.defineProperty;var ut=(e,t,n)=>t in e?lt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var Oe=(e,t,n)=>(ut(e,typeof t!="symbol"?t+"":t,n),n);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const u of document.querySelectorAll('link[rel="modulepreload"]'))l(u);new MutationObserver(u=>{for(const r of u)if(r.type==="childList")for(const p of r.addedNodes)p.tagName==="LINK"&&p.rel==="modulepreload"&&l(p)}).observe(document,{childList:!0,subtree:!0});function n(u){const r={};return u.integrity&&(r.integrity=u.integrity),u.referrerPolicy&&(r.referrerPolicy=u.referrerPolicy),u.crossOrigin==="use-credentials"?r.credentials="include":u.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function l(u){if(u.ep)return;u.ep=!0;const r=n(u);fetch(u.href,r)}})();function U(){}function Ye(e){return e()}function Re(){return Object.create(null)}function Z(e){e.forEach(Ye)}function Ze(e){return typeof e=="function"}function Ae(e,t){return e!=e?t==t:e!==t||e&&typeof e=="object"||typeof e=="function"}let Ee;function de(e,t){return e===t?!0:(Ee||(Ee=document.createElement("a")),Ee.href=t,e===Ee.href)}function it(e){return Object.keys(e).length===0}function et(e,...t){if(e==null){for(const l of t)l(void 0);return U}const n=e.subscribe(...t);return n.unsubscribe?()=>n.unsubscribe():n}function Te(e){let t;return et(e,n=>t=n)(),t}function ae(e,t,n){e.$$.on_destroy.push(et(t,n))}function s(e,t){e.appendChild(t)}function L(e,t,n){e.insertBefore(t,n||null)}function S(e){e.parentNode&&e.parentNode.removeChild(e)}function st(e,t){for(let n=0;n<e.length;n+=1)e[n]&&e[n].d(t)}function c(e){return document.createElement(e)}function N(e){return document.createTextNode(e)}function g(){return N(" ")}function $(e,t,n,l){return e.addEventListener(t,n,l),()=>e.removeEventListener(t,n,l)}function i(e,t,n){n==null?e.removeAttribute(t):e.getAttribute(t)!==n&&e.setAttribute(t,n)}function tt(e){return e===""?null:+e}function rt(e){return Array.from(e.childNodes)}function H(e,t){t=""+t,e.data!==t&&(e.data=t)}function x(e,t){e.value=t??""}function pe(e,t,n,l){n==null?e.style.removeProperty(t):e.style.setProperty(t,n,l?"important":"")}let we;function ve(e){we=e}function ot(){if(!we)throw new Error("Function called outside component initialization");return we}function ct(e){ot().$$.on_mount.push(e)}const ce=[],Je=[];let fe=[];const He=[],at=Promise.resolve();let We=!1;function ft(){We||(We=!0,at.then(nt))}function ze(e){fe.push(e)}const Pe=new Set;let re=0;function nt(){if(re!==0)return;const e=we;do{try{for(;re<ce.length;){const t=ce[re];re++,ve(t),dt(t.$$)}}catch(t){throw ce.length=0,re=0,t}for(ve(null),ce.length=0,re=0;Je.length;)Je.pop()();for(let t=0;t<fe.length;t+=1){const n=fe[t];Pe.has(n)||(Pe.add(n),n())}fe.length=0}while(ce.length);for(;He.length;)He.pop()();We=!1,Pe.clear(),ve(e)}function dt(e){if(e.fragment!==null){e.update(),Z(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(ze)}}function pt(e){const t=[],n=[];fe.forEach(l=>e.indexOf(l)===-1?t.push(l):n.push(l)),n.forEach(l=>l()),fe=t}const Fe=new Set;let ue;function ht(){ue={r:0,c:[],p:ue}}function mt(){ue.r||Z(ue.c),ue=ue.p}function le(e,t){e&&e.i&&(Fe.delete(e),e.i(t))}function ge(e,t,n,l){if(e&&e.o){if(Fe.has(e))return;Fe.add(e),ue.c.push(()=>{Fe.delete(e),l&&(n&&e.d(1),l())}),e.o(t)}else l&&l()}function Ke(e){return(e==null?void 0:e.length)!==void 0?e:Array.from(e)}function Me(e){e&&e.c()}function Be(e,t,n){const{fragment:l,after_update:u}=e.$$;l&&l.m(t,n),ze(()=>{const r=e.$$.on_mount.map(Ye).filter(Ze);e.$$.on_destroy?e.$$.on_destroy.push(...r):Z(r),e.$$.on_mount=[]}),u.forEach(ze)}function De(e,t){const n=e.$$;n.fragment!==null&&(pt(n.after_update),Z(n.on_destroy),n.fragment&&n.fragment.d(t),n.on_destroy=n.fragment=null,n.ctx=[])}function bt(e,t){e.$$.dirty[0]===-1&&(ce.push(e),ft(),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}function Se(e,t,n,l,u,r,p,d=[-1]){const _=we;ve(e);const o=e.$$={fragment:null,ctx:[],props:r,update:U,not_equal:u,bound:Re(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(t.context||(_?_.$$.context:[])),callbacks:Re(),dirty:d,skip_bound:!1,root:t.target||_.$$.root};p&&p(o.root);let f=!1;if(o.ctx=n?n(e,t.props||{},(b,k,...y)=>{const E=y.length?y[0]:k;return o.ctx&&u(o.ctx[b],o.ctx[b]=E)&&(!o.skip_bound&&o.bound[b]&&o.bound[b](E),f&&bt(e,b)),k}):[],o.update(),f=!0,Z(o.before_update),o.fragment=l?l(o.ctx):!1,t.target){if(t.hydrate){const b=rt(t.target);o.fragment&&o.fragment.l(b),b.forEach(S)}else o.fragment&&o.fragment.c();t.intro&&le(e.$$.fragment),Be(e,t.target,t.anchor),nt()}ve(_)}class Ie{constructor(){Oe(this,"$$");Oe(this,"$$set")}$destroy(){De(this,1),this.$destroy=U}$on(t,n){if(!Ze(n))return U;const l=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return l.push(n),()=>{const u=l.indexOf(n);u!==-1&&l.splice(u,1)}}$set(t){this.$$set&&!it(t)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}const _t="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(_t);const oe=[];function Ne(e,t=U){let n;const l=new Set;function u(d){if(Ae(e,d)&&(e=d,n)){const _=!oe.length;for(const o of l)o[1](),oe.push(o,e);if(_){for(let o=0;o<oe.length;o+=2)oe[o][0](oe[o+1]);oe.length=0}}}function r(d){u(d(e))}function p(d,_=U){const o=[d,_];return l.add(o),l.size===1&&(n=t(u,r)||U),d(e),()=>{l.delete(o),l.size===0&&n&&(n(),n=null)}}return{set:u,update:r,subscribe:p}}const he=Ne(""),$e=Ne(""),ke=Ne(256),gt=()=>{const e=document.cookie;e!==""&&e.split("; ").forEach(n=>{n.startsWith("accessToken")&&$e.set(n.replace(/accessToken=/,"")),n.startsWith("serverUrl")&&he.set(n.replace(/serverUrl=/,"")),n.startsWith("mediaWidth")&&ke.set(Number(n.replace(/mediaWidth=/,"")))})},Ue=()=>{document.cookie=`accessToken=${Te($e)}; Max-Age=50000000`,document.cookie=`serverUrl=${Te(he)}; Max-Age=50000000`,document.cookie=`mediaWidth=${Te(ke)}; Max-Age=50000000`};function vt(e){let t,n=e[0].name+"",l;return{c(){t=c("div"),l=N(n),i(t,"class","alert w-full audio")},m(u,r){L(u,t,r),s(t,l)},p(u,r){r&1&&n!==(n=u[0].name+"")&&H(l,n)},d(u){u&&S(t)}}}function wt(e){let t,n;return{c(){t=c("audio"),t.controls=!0,de(t.src,n=e[0].url)||i(t,"src",n),i(t,"class","bg-white media svelte-dn6ut"),pe(t,"--size",e[2]+"px")},m(l,u){L(l,t,u)},p(l,u){u&1&&!de(t.src,n=l[0].url)&&i(t,"src",n),u&4&&pe(t,"--size",l[2]+"px")},d(l){l&&S(t)}}}function kt(e){let t,n;return{c(){t=c("video"),t.controls=!0,de(t.src,n=e[0].url)||i(t,"src",n),i(t,"class","bg-white"),i(t,"width",e[2]),i(t,"height",e[2])},m(l,u){L(l,t,u)},p(l,u){u&1&&!de(t.src,n=l[0].url)&&i(t,"src",n),u&4&&i(t,"width",l[2]),u&4&&i(t,"height",l[2])},d(l){l&&S(t)}}}function At(e){let t,n,l;return{c(){t=c("img"),i(t,"loading","lazy"),i(t,"class","media object-contain bg-white svelte-dn6ut"),de(t.src,n=e[0].thumbnailUrl)||i(t,"src",n),i(t,"alt",l=e[0].url),pe(t,"--size",e[2]+"px")},m(u,r){L(u,t,r)},p(u,r){r&1&&!de(t.src,n=u[0].thumbnailUrl)&&i(t,"src",n),r&1&&l!==(l=u[0].url)&&i(t,"alt",l),r&4&&pe(t,"--size",u[2]+"px")},d(u){u&&S(t)}}}function Ct(e){let t,n,l,u,r=e[1]+1+"",p,d,_=e[0].isSensitive?"（センシティブ）":"",o,f,b,k=e[0].type+"",y,E,h,O,a,v,F,m,w,I,q=e[0].name+"",Q,me,P,j,Y,K=e[0].id+"",ie,W,be,V,X=new Date(Date.parse(e[0].createdAt)).toLocaleString()+"",ee,_e,M,se,R=e[0].user.username+"",te,ne,T,D,A,z,je,G,Ce,Le,xe;function qe(C,B){return B&1&&(O=null),B&1&&(a=null),B&1&&(v=null),O==null&&(O=!!C[0].type.startsWith("image")),O?At:(a==null&&(a=!!C[0].type.startsWith("video")),a?kt:(v==null&&(v=!!C[0].type.startsWith("audio")),v?wt:vt))}let ye=qe(e,-1),J=ye(e);return{c(){t=c("div"),n=c("div"),l=c("div"),u=c("div"),p=N(r),d=c("span"),o=N(_),f=g(),b=c("div"),y=N(k),E=g(),h=c("a"),J.c(),m=g(),w=c("div"),I=c("p"),Q=N(q),me=g(),P=c("div"),j=c("a"),Y=N("ID : "),ie=N(K),be=g(),V=c("p"),ee=N(X),_e=g(),M=c("a"),se=N("@"),te=N(R),T=g(),D=c("div"),A=c("label"),z=c("span"),z.textContent="フラグ",je=g(),G=c("input"),i(d,"class","text-xs text-red-600"),i(u,"class","font-bold"),i(b,"class","w-full text-xs text-end"),i(l,"class","grid grid-cols-2"),i(h,"href",F=e[0].url),i(h,"target","_blank"),i(w,"class","text-sm font-bold truncate title svelte-dn6ut"),pe(w,"--size",e[2]+"px"),i(j,"href",W=`https://${e[3]}/admin/file/${e[0].id}`),i(j,"tabindex","-1"),i(j,"target","_blank"),i(j,"class","link"),i(P,"class","text-sm"),i(M,"class","badge badge-primary badge-outline"),i(M,"tabindex","-1"),i(M,"href",ne=`https://${e[3]}/@${e[0].user.username}`),i(M,"target","_blank"),i(z,"class","label-text mr-3"),i(G,"type","checkbox"),i(G,"class","checkbox checkbox-error"),i(G,"tabindex",e[1]),i(A,"class","label cursor-pointer w-fit"),i(D,"class","grid grid-cols-2 items-center"),i(n,"class","card-body"),i(t,"class",Ce="card card-bordered card-compact "+(e[0].isSensitive?"border-red-500":"")+" "+(e[0].checked?"bg-red-100":"bg-base-200"))},m(C,B){L(C,t,B),s(t,n),s(n,l),s(l,u),s(u,p),s(u,d),s(d,o),s(l,f),s(l,b),s(b,y),s(n,E),s(n,h),J.m(h,null),s(n,m),s(n,w),s(w,I),s(I,Q),s(n,me),s(n,P),s(P,j),s(j,Y),s(j,ie),s(P,be),s(P,V),s(V,ee),s(n,_e),s(n,M),s(M,se),s(M,te),s(n,T),s(n,D),s(D,A),s(A,z),s(A,je),s(A,G),G.checked=e[0].checked,Le||(xe=$(G,"change",e[4]),Le=!0)},p(C,[B]){B&2&&r!==(r=C[1]+1+"")&&H(p,r),B&1&&_!==(_=C[0].isSensitive?"（センシティブ）":"")&&H(o,_),B&1&&k!==(k=C[0].type+"")&&H(y,k),ye===(ye=qe(C,B))&&J?J.p(C,B):(J.d(1),J=ye(C),J&&(J.c(),J.m(h,null))),B&1&&F!==(F=C[0].url)&&i(h,"href",F),B&1&&q!==(q=C[0].name+"")&&H(Q,q),B&4&&pe(w,"--size",C[2]+"px"),B&1&&K!==(K=C[0].id+"")&&H(ie,K),B&9&&W!==(W=`https://${C[3]}/admin/file/${C[0].id}`)&&i(j,"href",W),B&1&&X!==(X=new Date(Date.parse(C[0].createdAt)).toLocaleString()+"")&&H(ee,X),B&1&&R!==(R=C[0].user.username+"")&&H(te,R),B&9&&ne!==(ne=`https://${C[3]}/@${C[0].user.username}`)&&i(M,"href",ne),B&2&&i(G,"tabindex",C[1]),B&1&&(G.checked=C[0].checked),B&1&&Ce!==(Ce="card card-bordered card-compact "+(C[0].isSensitive?"border-red-500":"")+" "+(C[0].checked?"bg-red-100":"bg-base-200"))&&i(t,"class",Ce)},i:U,o:U,d(C){C&&S(t),J.d(),Le=!1,xe()}}}function yt(e,t,n){let l,u;ae(e,ke,_=>n(2,l=_)),ae(e,he,_=>n(3,u=_));let{file:r}=t,{index:p}=t;function d(){r.checked=this.checked,n(0,r)}return e.$$set=_=>{"file"in _&&n(0,r=_.file),"index"in _&&n(1,p=_.index)},[r,p,l,u,d]}class Et extends Ie{constructor(t){super(),Se(this,t,yt,Ct,Ae,{file:0,index:1})}}function Ft(e){let t,n,l;return{c(){t=c("input"),n=g(),l=c("div"),l.innerHTML='<div class="modal-box"></div> <label class="modal-backdrop" for="file-details-dialog">Close</label>',i(t,"type","checkbox"),i(t,"id","file-details-dialog"),i(t,"class","modal-toggle"),i(l,"class","modal")},m(u,r){L(u,t,r),L(u,n,r),L(u,l,r)},p:U,i:U,o:U,d(u){u&&(S(t),S(n),S(l))}}}class Bt extends Ie{constructor(t){super(),Se(this,t,null,Ft,Ae,{})}}function Dt(e){let t,n,l,u,r,p,d,_,o,f,b,k,y,E,h,O,a,v,F,m;return{c(){t=c("input"),n=g(),l=c("div"),u=c("div"),r=c("h2"),r.textContent="報告用テンプレート文書作成",p=g(),d=c("textarea"),_=g(),o=c("div"),f=c("button"),f.textContent="生成",b=g(),k=c("button"),k.textContent="生成(フラグ概要)",y=g(),E=c("button"),E.textContent="クリップボードにコピー",h=g(),O=c("label"),O.textContent="閉じる",a=g(),v=c("label"),v.textContent="Close",i(t,"type","checkbox"),i(t,"id","report-dialog"),i(t,"class","modal-toggle"),i(d,"class","textarea w-full my-2 textarea-bordered"),i(f,"class","btn btn-primary btn-wide"),i(k,"class","btn btn-warning"),i(E,"class","btn btn-secondary btn-wide"),i(O,"class","btn btn-outline"),i(O,"for","report-dialog"),i(o,"class","flex flex-wrap w-full justify-between gap-4"),i(u,"class","modal-box lg:w-[800px]"),i(v,"class","modal-backdrop"),i(v,"for","report-dialog"),i(l,"class","modal")},m(w,I){L(w,t,I),L(w,n,I),L(w,l,I),s(l,u),s(u,r),s(u,p),s(u,d),x(d,e[0]),s(u,_),s(u,o),s(o,f),s(o,b),s(o,k),s(o,y),s(o,E),s(o,h),s(o,O),s(l,a),s(l,v),F||(m=[$(d,"input",e[5]),$(f,"click",e[1]),$(k,"click",e[2]),$(E,"click",e[3])],F=!0)},p(w,[I]){I&1&&x(d,w[0])},i:U,o:U,d(w){w&&(S(t),S(n),S(l)),F=!1,Z(m)}}}function $t(e,t,n){let l;ae(e,he,f=>n(6,l=f));let{files:u}=t,r="";const p=()=>{let f=0;if(u.length===0){n(0,r="まだファイルをチェックしていません。");return}n(0,r=`${new Date().toLocaleString()}
`),n(0,r+=`${u.length}個のファイルをチェックしました。

`),n(0,r+=`チェックを開始したファイルのID ： ${u[0].id} <https://${l}/admin/file/${u[0].id}>
`),n(0,r+=`チェックを開始したファイルの作成時刻 ： ${new Date(Date.parse(u[0].createdAt)).toLocaleString()}
`),n(0,r+=`チェックを終了したファイルのID ： ${u[u.length-1].id}  <https://${l}/admin/file/${u[u.length-1].id}>
`),n(0,r+=`チェックを終了したファイルの作成時刻 ： ${new Date(Date.parse(u[u.length-1].createdAt)).toLocaleString()}

`),u.forEach(b=>{b.checked===!0&&f++}),n(0,r+=`フラグを立てたファイルは${f}個でした。
`),n(0,r+=`続きをチェックする場合は 
`),n(0,r+=`<https://${l}/admin/files> 
`),n(0,r+=`または <https://uboar.github.io/misskey-drive-moderate-supporter?sinceId=${u[u.length-1].id}> からチェック出来ます。`)},d=()=>{n(0,r="");let f=[];u.forEach(b=>{b.checked===!0&&f.push(`https://${l}/admin/file/${b.id}`)}),n(0,r+=`${f.length}個のフラグを立てたファイルがありました。以下が一覧です。

`),f.forEach((b,k)=>{n(0,r+=`${k+1} ： ${b} 
`)})},_=()=>{navigator.clipboard&&navigator.clipboard.writeText(r)};function o(){r=this.value,n(0,r)}return e.$$set=f=>{"files"in f&&n(4,u=f.files)},[r,p,d,_,u,o]}class St extends Ie{constructor(t){super(),Se(this,t,$t,Dt,Ae,{files:4})}}function Ve(e,t,n){const l=e.slice();return l[17]=t[n],l[19]=n,l}function It(e){let t,n,l=e[3].length>0?"これより新しいファイルを取得":"ファイルの取得",u,r,p,d,_;return{c(){t=c("div"),n=c("button"),u=N(l),r=g(),p=c("button"),p.textContent="開く",i(n,"class","btn btn-sm btn-wide max-w-[50%] btn-primary"),i(p,"class","btn btn-info btn-sm max-w-[50%] btn-wide"),i(t,"class","flex")},m(o,f){L(o,t,f),s(t,n),s(n,u),s(t,r),s(t,p),d||(_=[$(n,"click",e[7]),$(p,"click",e[16])],d=!0)},p(o,f){f&8&&l!==(l=o[3].length>0?"これより新しいファイルを取得":"ファイルの取得")&&H(u,l)},d(o){o&&S(t),d=!1,Z(_)}}}function Lt(e){let t,n,l,u,r,p,d,_,o,f,b,k,y,E,h,O,a,v,F,m,w,I,q,Q,me,P,j,Y,K,ie,W,be,V,X=e[3].length>0?"これより新しいファイルを取得":"ファイルの取得",ee,_e,M,se,R,te,ne,T=e[3].length>0&&Xe(e),D=e[3].length>0&&Ge(e);return{c(){t=c("div"),n=c("span"),n.textContent="Misskey Drive Moderate Supporter",l=g(),u=c("span"),u.textContent="入力した情報はCookieに保存されます。",r=g(),p=c("div"),d=c("div"),_=c("label"),_.textContent="サーバーURL",o=g(),f=c("input"),b=g(),k=c("div"),y=c("label"),y.textContent="アクセストークン",E=g(),h=c("input"),O=g(),a=c("div"),v=c("div"),F=c("label"),F.textContent="sinceId",m=g(),w=c("input"),I=g(),q=c("div"),Q=c("label"),Q.textContent="untilId",me=g(),P=c("input"),j=g(),Y=c("div"),K=c("label"),K.textContent="メディア幅",ie=g(),W=c("input"),be=g(),V=c("button"),ee=N(X),_e=g(),T&&T.c(),M=g(),D&&D.c(),se=g(),R=c("button"),R.textContent="畳む",i(n,"class","font-bold text-3xl hidden lg:block"),i(u,"class","hidden lg:block"),i(_,"for","server-url"),i(f,"id","server-url"),i(f,"type","text"),i(f,"class","input input-xs md:input-md input-bordered md:w-64"),i(f,"placeholder","EX:voskey.icalo.net"),i(y,"for","access-token"),i(h,"id","access-token"),i(h,"type","password"),i(h,"class","input input-xs md:input-md input-bordered md:w-64"),i(p,"class","flex flex-wrap gap-2 md:gap-8 md:my-4"),i(F,"for","since-id"),i(w,"id","since-id"),i(w,"type","text"),i(w,"class","input input-xs md:input-md input-bordered w-32"),i(Q,"for","until-id"),i(P,"id","until-id"),i(P,"type","text"),i(P,"class","input input-xs md:input-md input-bordered w-32"),i(K,"for","until-width"),i(W,"id","media-width"),i(W,"type","number"),i(W,"class","input input-xs md:input-md input-bordered w-32"),i(V,"class","btn btn-sm md:btn-md md:btn-wide btn-primary"),i(R,"class","btn btn-info btn-sm md:btn-md"),i(a,"class","flex flex-wrap md:gap-4 gap-2 items-center"),i(t,"class","md:p-4")},m(A,z){L(A,t,z),s(t,n),s(t,l),s(t,u),s(t,r),s(t,p),s(p,d),s(d,_),s(d,o),s(d,f),x(f,e[4]),s(p,b),s(p,k),s(k,y),s(k,E),s(k,h),x(h,e[5]),s(t,O),s(t,a),s(a,v),s(v,F),s(v,m),s(v,w),x(w,e[1]),s(a,I),s(a,q),s(q,Q),s(q,me),s(q,P),x(P,e[2]),s(a,j),s(a,Y),s(Y,K),s(Y,ie),s(Y,W),x(W,e[6]),s(a,be),s(a,V),s(V,ee),s(a,_e),T&&T.m(a,null),s(a,M),D&&D.m(a,null),s(a,se),s(a,R),te||(ne=[$(f,"input",e[9]),$(f,"input",Ue),$(h,"input",e[10]),$(h,"input",Ue),$(w,"input",e[11]),$(P,"input",e[12]),$(W,"input",e[13]),$(W,"input",Ue),$(V,"click",e[7]),$(R,"click",e[15])],te=!0)},p(A,z){z&16&&f.value!==A[4]&&x(f,A[4]),z&32&&h.value!==A[5]&&x(h,A[5]),z&2&&w.value!==A[1]&&x(w,A[1]),z&4&&P.value!==A[2]&&x(P,A[2]),z&64&&tt(W.value)!==A[6]&&x(W,A[6]),z&8&&X!==(X=A[3].length>0?"これより新しいファイルを取得":"ファイルの取得")&&H(ee,X),A[3].length>0?T?T.p(A,z):(T=Xe(A),T.c(),T.m(a,M)):T&&(T.d(1),T=null),A[3].length>0?D?D.p(A,z):(D=Ge(A),D.c(),D.m(a,se)):D&&(D.d(1),D=null)},d(A){A&&S(t),T&&T.d(),D&&D.d(),te=!1,Z(ne)}}}function Xe(e){let t,n,l;return{c(){t=c("button"),t.textContent="これより古いファイルを取得",i(t,"class","btn btn-sm md:btn-md md:btn-wide btn-accent")},m(u,r){L(u,t,r),n||(l=$(t,"click",e[8]),n=!0)},p:U,d(u){u&&S(t),n=!1,l()}}}function Ge(e){let t,n,l,u,r;return{c(){t=c("button"),t.textContent="バッファを削除して再取得",n=g(),l=c("label"),l.textContent="報告用テンプレート文書作成",i(t,"class","btn btn-sm md:btn-md btn-outline btn-primary"),i(l,"for","report-dialog"),i(l,"class","btn btn-sm md:btn-md btn-secondary")},m(p,d){L(p,t,d),L(p,n,d),L(p,l,d),u||(r=$(t,"click",e[14]),u=!0)},p:U,d(p){p&&(S(t),S(n),S(l)),u=!1,r()}}}function Qe(e){let t,n;return t=new Et({props:{file:e[17],index:e[19]}}),{c(){Me(t.$$.fragment)},m(l,u){Be(t,l,u),n=!0},p(l,u){const r={};u&8&&(r.file=l[17]),t.$set(r)},i(l){n||(le(t.$$.fragment,l),n=!0)},o(l){ge(t.$$.fragment,l),n=!1},d(l){De(t,l)}}}function Ot(e){let t,n,l,u,r,p,d,_,o,f;function b(a,v){return a[0]?It:Lt}let k=b(e),y=k(e),E=Ke(e[3]),h=[];for(let a=0;a<E.length;a+=1)h[a]=Qe(Ve(e,E,a));const O=a=>ge(h[a],1,1,()=>{h[a]=null});return d=new Bt({}),o=new St({props:{files:e[3]}}),{c(){t=c("main"),n=c("div"),y.c(),l=g(),u=c("div"),r=c("div");for(let a=0;a<h.length;a+=1)h[a].c();p=g(),Me(d.$$.fragment),_=g(),Me(o.$$.fragment),i(n,"class","sticky z-20 top-0 border-b-2 w-full bg-slate-300"),i(r,"class","flex flex-wrap gap-2"),i(u,"class","w-full")},m(a,v){L(a,t,v),s(t,n),y.m(n,null),s(t,l),s(t,u),s(u,r);for(let F=0;F<h.length;F+=1)h[F]&&h[F].m(r,null);s(t,p),Be(d,t,null),s(t,_),Be(o,t,null),f=!0},p(a,[v]){if(k===(k=b(a))&&y?y.p(a,v):(y.d(1),y=k(a),y&&(y.c(),y.m(n,null))),v&8){E=Ke(a[3]);let m;for(m=0;m<E.length;m+=1){const w=Ve(a,E,m);h[m]?(h[m].p(w,v),le(h[m],1)):(h[m]=Qe(w),h[m].c(),le(h[m],1),h[m].m(r,null))}for(ht(),m=E.length;m<h.length;m+=1)O(m);mt()}const F={};v&8&&(F.files=a[3]),o.$set(F)},i(a){if(!f){for(let v=0;v<E.length;v+=1)le(h[v]);le(d.$$.fragment,a),le(o.$$.fragment,a),f=!0}},o(a){h=h.filter(Boolean);for(let v=0;v<h.length;v+=1)ge(h[v]);ge(d.$$.fragment,a),ge(o.$$.fragment,a),f=!1},d(a){a&&S(t),y.d(),st(h,a),De(d),De(o)}}}function Tt(e,t,n){let l,u,r;ae(e,he,m=>n(4,l=m)),ae(e,$e,m=>n(5,u=m)),ae(e,ke,m=>n(6,r=m));let p=!1;gt(),ct(()=>{const m=new URLSearchParams(window.location.search);m.has("sinceId")&&n(1,o=m.get("sinceId")),m.has("untilId")&&n(2,f=m.get("untilId"))});const d=async()=>{try{const m={i:u,limit:100};b.length>0&&n(1,o=b[b.length-1].id),o!==""&&(m.sinceId=o),f!==""&&(m.untilId=f);const I=await(await fetch(`https://${l}/api/admin/drive/files`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(m)})).json();o===""&&f===""&&I.reverse(),n(3,b=[...b,...I])}catch(m){console.error(m)}},_=async()=>{try{const m={i:u,limit:100};n(1,o=""),b.length>0&&n(2,f=b[0].id),f!==""&&(m.untilId=f);const I=await(await fetch(`https://${l}/api/admin/drive/files`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(m)})).json();I.reverse(),n(3,b=[...I,...b])}catch(m){console.log(m)}};let o="",f="",b=[];function k(){l=this.value,he.set(l)}function y(){u=this.value,$e.set(u)}function E(){o=this.value,n(1,o)}function h(){f=this.value,n(2,f)}function O(){r=tt(this.value),ke.set(r)}return[p,o,f,b,l,u,r,d,_,k,y,E,h,O,()=>{n(3,b=[]),d()},()=>{n(0,p=!0)},()=>{n(0,p=!1)}]}class Pt extends Ie{constructor(t){super(),Se(this,t,Tt,Ot,Ae,{})}}new Pt({target:document.getElementById("app")});
